# WooAgent - הוראות התקנה והפעלה שלב אחר שלב

מסמך זה מפרט את כל השלבים הנדרשים להתקנה, הפעלה ובדיקה של מערכת WooAgent.

## דרישות מקדימות

לפני שמתחילים, יש לוודא שהכלים הבאים מותקנים במחשב:

- **Node.js** (גרסה 16 ומעלה)
- **Python** (גרסה 3.9 ומעלה)
- **npm** (בדרך כלל מגיע עם Node.js)
- **pip** (מנהל החבילות של Python)
- **Git** (לשכפול המאגר)

בנוסף, תצטרכו:

- **מפתח API של OpenAI** עם גישה ל-GPT-4
- **חנות WooCommerce** עם גישה ל-REST API (מפתח צרכן וסוד)

## שלב 1: הורדת הקוד

```bash
# שכפול המאגר
git clone https://github.com/yourusername/wooagent.git
cd wooagent
```

## שלב 2: התקנת הסוכן (Python)

```bash
# מעבר לתיקיית הסוכן
cd agent

# יצירת סביבה וירטואלית
python -m venv venv

# הפעלת הסביבה הוירטואלית
# בחלונות:
venv\Scripts\activate
# במקינטוש/לינוקס:
source venv/bin/activate

# התקנת החבילות הנדרשות
pip install -r requirements.txt
```

כעת יש ליצור קובץ `.env` בתיקיית `agent` עם התוכן הבא:

```
OPENAI_API_KEY=your_openai_api_key
MCP_SERVER_URL=http://localhost:3000
LOG_LEVEL=INFO
```

החליפו את `your_openai_api_key` במפתח ה-API האמיתי שלכם.

## שלב 3: התקנת שרת ה-MCP

```bash
# חזרה לתיקייה הראשית
cd ..

# מעבר לתיקיית שרת ה-MCP
cd mcp-server

# התקנת החבילות הנדרשות
npm install
```

כעת יש ליצור קובץ `.env` בתיקיית `mcp-server` עם התוכן הבא:

```
WOOCOMMERCE_URL=https://your-store.com
WOOCOMMERCE_CONSUMER_KEY=your_consumer_key
WOOCOMMERCE_CONSUMER_SECRET=your_consumer_secret
PORT=3000
```

החליפו את הערכים בפרטי החנות האמיתיים שלכם.

## שלב 4: התקנת שכבת האינטגרציה

```bash
# חזרה לתיקייה הראשית
cd ..

# מעבר לתיקיית האינטגרציה
cd integration

# התקנת החבילות הנדרשות
npm install
```

כעת יש ליצור קובץ `.env` בתיקיית `integration` עם התוכן הבא:

```
AGENT_API_URL=http://localhost:5000
PORT=4000
```

## שלב 5: התקנת ממשק המשתמש (Frontend)

```bash
# חזרה לתיקייה הראשית
cd ..

# מעבר לתיקיית הפרונטאנד
cd frontend

# התקנת החבילות הנדרשות
npm install
```

כעת יש ליצור קובץ `.env.local` בתיקיית `frontend` עם התוכן הבא:

```
NEXT_PUBLIC_API_URL=http://localhost:4000
```

## שלב 6: הפעלת המערכת

יש להפעיל כל רכיב בחלון טרמינל נפרד.

### 1. הפעלת שרת ה-MCP

```bash
# בתיקיית mcp-server
cd mcp-server
npm start
```

שרת ה-MCP אמור לעלות בפורט 3000. יש לוודא שמופיעה הודעה שהשרת פועל.

### 2. הפעלת הסוכן

```bash
# בתיקיית agent
cd agent

# הפעלת הסביבה הוירטואלית אם היא לא כבר פעילה
# בחלונות:
venv\Scripts\activate
# במקינטוש/לינוקס:
source venv/bin/activate

# הפעלת הסוכן
python -m src.main
```

הסוכן אמור לעלות בפורט 5000. יש לוודא שמופיעה הודעה שהסוכן פועל.

### 3. הפעלת שכבת האינטגרציה

```bash
# בתיקיית integration
cd integration
npm start
```

שכבת האינטגרציה אמורה לעלות בפורט 4000. יש לוודא שמופיעה הודעה שהשרת פועל.

### 4. הפעלת הפרונטאנד

```bash
# בתיקיית frontend
cd frontend
npm run dev
```

הפרונטאנד אמור לעלות בפורט 3001. יש לוודא שמופיעה הודעה שהשרת פועל.

## שלב 7: גישה למערכת

פתחו את הדפדפן וגשו לכתובת:

```
http://localhost:3001
```

אתם אמורים לראות את לוח הבקרה של WooAgent.

## שלב 8: הגדרת המערכת

1. לחצו על "Settings" בתפריט הצד
2. הזינו את מפתח ה-API של OpenAI
3. בחרו את המודל (GPT-4 מומלץ)
4. לחצו על "Save Settings"
5. עברו ללשונית "WooCommerce"
6. הזינו את כתובת החנות שלכם
7. הזינו את מפתח הצרכן והסוד
8. לחצו על "Test Connection" כדי לוודא שהחיבור תקין
9. לחצו על "Save Settings"

## שלב 9: בדיקת המערכת

### בדיקה ידנית

1. לחצו על "Chat" בתפריט הצד
2. שלחו הודעה כמו "הראה לי את כל המוצרים בחנות"
3. המתינו לתשובה מהסוכן
4. נסו עוד כמה פקודות כמו:
   - "מה המחיר של המוצר הראשון?"
   - "הראה לי את ההזמנות האחרונות"
   - "צור קופון חדש עם 20% הנחה"

### הרצת בדיקות אוטומטיות

```bash
# חזרה לתיקייה הראשית
cd ..

# מעבר לתיקיית הבדיקות
cd tests

# התקנת החבילות הנדרשות
npm install

# הרצת בדיקות מקצה לקצה
npm run e2e
```

הבדיקות האוטומטיות יריצו מספר תרחישים ויבדקו שהמערכת מגיבה כראוי.

## שלב 10: צפייה בלוגים

1. לחצו על "Logs" בתפריט הצד
2. בחרו את סוג הלוגים שברצונכם לראות (Agent, Integration, MCP)
3. בדקו את הלוגים כדי לוודא שאין שגיאות

## פתרון בעיות נפוצות

### הסוכן לא מתחבר לשרת ה-MCP

- ודאו ששרת ה-MCP פועל בפורט הנכון
- בדקו שה-URL של שרת ה-MCP בקובץ `.env` של הסוכן נכון
- בדקו את הלוגים של הסוכן לשגיאות חיבור

### שכבת האינטגרציה לא מתחברת לסוכן

- ודאו שהסוכן פועל בפורט הנכון
- בדקו שה-URL של הסוכן בקובץ `.env` של שכבת האינטגרציה נכון
- בדקו את הלוגים של שכבת האינטגרציה לשגיאות חיבור

### הפרונטאנד לא מתחבר לשכבת האינטגרציה

- ודאו ששכבת האינטגרציה פועלת בפורט הנכון
- בדקו שה-URL של שכבת האינטגרציה בקובץ `.env.local` של הפרונטאנד נכון
- בדקו את הקונסול של הדפדפן לשגיאות חיבור

### בעיות בחיבור ל-WooCommerce

- ודאו שחנות ה-WooCommerce שלכם נגישה
- בדקו שמפתח הצרכן והסוד נכונים
- ודאו שה-REST API מופעל בהגדרות ה-WooCommerce שלכם

## סיכום

כעת המערכת אמורה לפעול במלואה. אתם יכולים לנהל את חנות ה-WooCommerce שלכם באמצעות שיחה טבעית עם הסוכן.

למידע נוסף, עיינו במסמכים הבאים:
- [מדריך למשתמש](./docs/USER_GUIDE.md)
- [תיעוד ה-API](./docs/API_DOCS.md)
